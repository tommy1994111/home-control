(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),i=n.n(o),c=(n(82),n(70)),s=n(72),l=(n(83),n(106)),u=n(140),d=n(150),m=n(141),f=n(142),p=n(143),h=n(146),v=n(43),g=n(145),w=n(144),E=n(64),b=n.n(E),y=n(66),k=n.n(y),x=n(67),C=n.n(x),j=n(147),O=n(148),H=n(149),N=n(68),S=n.n(N),D=n(62),W=n(16),A=n(69);var I,P=function(){return r.a.createElement(v.a,{paragraph:!0},"\u9996\u9801")},U=n(37),L=n.n(U),R=n(47),T=n(57),_=n(58),B=n(71),M=n(59),J=n(73),z=n(135),F=n(136),G=n(137),K=n(60),Y=(n(90),n(38)),Z=n.n(Y);!function(e){e[e.last10Data=0]="last10Data",e[e.last12Hours=1]="last12Hours",e[e.last24Hours=2]="last24Hours",e[e.today=3]="today"}(I||(I={}));var $=[{name:"\u9996\u9801",path:"/",exact:!0,component:P},{name:"\u6c34\u58d3\u5075\u6e2c",path:"/water_pressure",component:function(e){function t(){var e,n;Object(T.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(B.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(r)))).state={chart:null,loading:!0,lastUpdated:"",dataInterval:I.last10Data},n}return Object(J.a)(t,e),Object(_.a)(t,[{key:"mapDataToColumns",value:function(e){var t=e.map(function(e){return e.time});t.unshift("\u6642\u9593");var n=e.map(function(e){return e.pressure_value});return n.unshift("\u6c34\u58d3"),[t,n]}},{key:"getPressureData",value:function(){var e=Object(R.a)(L.a.mark(function e(){var t,n,a;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/getData?type=".concat(this.state.dataInterval),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"c3Config",value:function(e){return{data:{x:"\u6642\u9593",xFormat:"%Y-%m-%d %H:%M:%S",columns:e},axis:{x:{type:"timeseries",localtime:!0,tick:{format:"%H:%M"}}},grid:{x:{show:!1},y:{show:!1}},legend:{show:!1}}}},{key:"renderChart",value:function(){var e=Object(R.a)(L.a.mark(function e(t){var n,a,r,o;return L.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({loading:!0,dataInterval:t});case 2:return e.next=4,this.getPressureData();case 4:n=e.sent,a=this.mapDataToColumns(n),r=K.generate(this.c3Config(a)),o=(new Date).toLocaleString("zh-Hant",{timeZone:"Asia/Taipei"}),this.setState({chart:r,loading:!1,lastUpdated:o});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.renderChart(this.state.dataInterval)}},{key:"render",value:function(){var e=this;return r.a.createElement(z.a,null,r.a.createElement(F.a,null,r.a.createElement("div",{id:"chart"}),r.a.createElement(G.a,{className:Z.a.button,variant:"contained",color:"primary",onClick:function(){return e.renderChart(e.state.dataInterval)}},"\u66f4\u65b0"),r.a.createElement(G.a,{className:Z.a.button,variant:"contained",color:"secondary",onClick:function(){return e.renderChart(I.last10Data)}},"\u6700\u65b010\u7b46"),r.a.createElement(G.a,{className:Z.a.button,variant:"contained",color:"secondary",onClick:function(){return e.renderChart(I.last12Hours)}},"\u6700\u65b012\u5c0f\u6642"),r.a.createElement(G.a,{className:Z.a.button,variant:"contained",color:"secondary",onClick:function(){return e.renderChart(I.last24Hours)}},"\u6700\u65b024\u5c0f\u6642"),r.a.createElement(v.a,{variant:"h6"},"\u6700\u5f8c\u66f4\u65b0\u6642\u9593: ",this.state.lastUpdated)))}}]),t}(a.Component)}],q=Object(l.a)(function(e){return{root:{display:"flex"},menuButton:{marginRight:e.spacing(2)},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(s.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}}),Q=function(e){return r.a.forwardRef(function(t,n){return r.a.createElement(D.a,Object.assign({},t,{to:e,ref:n}))})},V=function(e){var t=e.name,n=e.path,a=e.exact;return r.a.createElement(W.b,{path:n,exact:a,component:function(){return r.a.createElement(v.a,{variant:"h6",noWrap:!0},t)}})};var X=function(){var e=q(),t=Object(u.a)(),n=r.a.useState(!1),a=Object(c.a)(n,2),o=a[0],i=a[1];function s(){i(!0)}function l(){i(!1)}return r.a.createElement("div",{className:e.root},r.a.createElement(m.a,null),r.a.createElement(W.a,null,r.a.createElement(f.a,{position:"fixed"},r.a.createElement(p.a,null,r.a.createElement(w.a,{color:"inherit","aria-label":"Open drawer",onClick:s,edge:"start",className:e.menuButton},r.a.createElement(b.a,null)),r.a.createElement(W.d,null,$.map(function(e,t){return r.a.createElement(V,Object.assign({key:t},e))})))),r.a.createElement(d.a,{className:e.drawer,open:o,onClose:l,onOpen:s,classes:{paper:e.drawerPaper}},r.a.createElement("div",{className:e.drawerHeader},r.a.createElement(w.a,{onClick:l},"ltr"===t.direction?r.a.createElement(k.a,null):r.a.createElement(C.a,null))),r.a.createElement(g.a,null),r.a.createElement(h.a,null,$.map(function(e){var t=e.name,n=e.path;return r.a.createElement(j.a,{button:!0,key:t,component:Q(n),onClick:l},r.a.createElement(O.a,null,r.a.createElement(S.a,null)),r.a.createElement(H.a,{primary:t}))}))),r.a.createElement("main",{className:e.content},r.a.createElement("div",{className:e.drawerHeader}),r.a.createElement(W.d,null,Object(A.a)($)))))},ee=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function te(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(r.a.createElement(X,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");ee?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):te(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):te(t,e)})}}()},38:function(e,t,n){e.exports={button:"style_button__3K0LH"}},77:function(e,t,n){e.exports=n(104)},82:function(e,t,n){}},[[77,1,2]]]);
//# sourceMappingURL=main.64fe49bd.chunk.js.map